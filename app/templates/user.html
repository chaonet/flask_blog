{% extends "base.html" %}

{% import "_macros.html" as macros %}

{% block content %}

{% if user.is_authenticated  %}
<img class="img-rounded profile-thumbnail" src="{{ user.gravatar(size=256) }}">
{% endif %}

<h1>{{ user.username }}</h1>

    <div>
    {% for message in get_flashed_messages() %} 
         <p>{{ message }}</p>
    {% endfor %}
    </div>
{% if user.name or user.location %}
<p>
    {% if user.name %}{{ user.name }}{% endif %}
    {% if user.location %} From <a href='http://maps.google.com/?q={{ user.location }}'>{{ user.location }}</a>{% endif %}

</p>
{% endif %}

<h3>Post by {{ user.username }}</h3>
{%  include '_posts.html' %}

<div class='pagination'>
    {{ macros.pagination_widget(pagination, 'index') }}
</div>

{% if current_user.is_administrator() %}<p><a href='mailto:{{ user.email }}'>{{ user.email }}</a></p>{% endif %}
{% if user.about_me %}<p>{{ user.about_me }}</p>{% endif %}

{% if current_user.is_administrator() %}
<button class='btn btn-default' href='{{ url_for('edit_profile_admin', id=user.id) }}'>Edit Profile Admin</button></p>
{% elif user == current_user %}
<button class='btn btn-default' href='{{ url_for('edit_profile', post=post) }}'>Edit Profile</button>
{% endif %}
<p>
    Member since {{ moment(user.member_since).format('L') }}.
    Last seen {{ moment(user.last_seen).fromNow() }}.
</p>

{% endblock %}